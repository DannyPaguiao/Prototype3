<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Bejewler</title>
		<script src="js/jquery.js"></script>
		<script src="js/underscore.js"></script>
		<script src="js/three.min.js"></script>
        <script src="js/Gems.js"></script>
        <script src="js/Robot.js"></script>
        <script src="js/Game.js"></script>
	</head>
	<body>
		<p>
        Bejewler
		</p>
		<script>

			$(function() {
              
              var game = new Game();
              game.init();
              game.start();
              
              });
            
        </script>
        
        <!---Implement directions from GMaps API---------->
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <style type="text/css">
            html { height: 100%; }
            body { height: 100%; margin: -50; padding: 50 }
            #map-canvas { height: 50%; width: 50%}
            </style>
        <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC9r1YcV7JvWDI13pROQIL7qTTXEl8WqSY&sensor=true">
            </script>
        <script type="text/javascript">
            
            function initialize() {
                var map;
                directionsDisplay = new google.maps.DirectionsRenderer();
                var mapOptions = {
                    zoom: 18,
                    mapTypeId: google.maps.MapTypeId.SATELLITE
                };
                map = new google.maps.Map(document.getElementById('map-canvas'),
                                          mapOptions);
                
                directionsDisplay.setMap(map);
                
                // Try HTML5 geolocation
                if(navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function(position) {
                                                             var pos = new google.maps.LatLng(position.coords.latitude,
                                                                                              position.coords.longitude);
                                                             
                                                             
                                                             map.setCenter(pos);
                                                             }, function() {
                                                             handleNoGeolocation(true);
                                                             });
                } else {
                    // Browser doesn't support Geolocation
                    handleNoGeolocation(false);
                }
            }
            
            function handleNoGeolocation(errorFlag) {
                if (errorFlag) {
                    var content = 'Error: The Geolocation service failed.';
                } else {
                    var content = 'Error: Your browser doesn\'t support geolocation.';
                }
                
                var options = {
                    map: map,
                    position: new google.maps.LatLng(80, 105),
                    content: content
                };
                
                var infowindow = new google.maps.InfoWindow(options);
                map.setCenter(options.position);
            }
            
            google.maps.event.addDomListener(window, 'load', initialize);
            var directionsDisplay;
            var directionsService = new google.maps.DirectionsService();
            
            function calcRoute() {
                var start = document.getElementById('start').value;
                var end = document.getElementById('end').value;
                var request = {
                    origin:start,
                    destination:end,
                    travelMode: google.maps.DirectionsTravelMode.WALKING
                };
                directionsService.route(request, function(response, status) {
                                        if (status == google.maps.DirectionsStatus.OK) {
                                        directionsDisplay.setDirections(response);
                                        }
                                        });
            }
            
            google.maps.event.addDomListener(window, 'load', initialize);
            </script>
        
        <div id="panel">
            <b>Start: </b>
            <select id="start" onchange="calcRoute();">
                <option value="santa cruz, ca">Santa Cruz</option>
                <option value="escondido, ca">Escondido</option>
            </select>
            <b>End: </b>
            <select id="end" onchange="calcRoute();">
                <option value="aptos, ca">Aptos</option>
                <option value="san francisco, ca">San Francisco</option>
            </select>
        </div>
        <div id="map-canvas"></div>
	</body>
</html>